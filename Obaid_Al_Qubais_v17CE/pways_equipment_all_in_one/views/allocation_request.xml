<odoo>
    <record id="allocation_request_form" model="ir.ui.view">
        <field name="name">allocation.request.form</field>
        <field name="model">allcation.request</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <field name="state" widget="statusbar"
                           statusbar_visible="new,waitapprove,approve,allocate,return,trans,cancel"/>
                    <button name="button_submit" string="Submit" type="object" class="btn-primary"
                            invisible="state != 'new'"/>
                    <button name="button_approve" string="Approve" type="object" class="btn-primary"
                            invisible="state != 'waitapprove'" groups="maintenance.group_equipment_manager"/>
                    <button name="button_allocate" string="Allocate" type="object" class="btn-primary"
                            invisible="state != 'approve'" groups="maintenance.group_equipment_manager"/>
                    <button name="button_return" string="Return" type="object" class="btn-primary"
                            invisible="state != 'allocate'" groups="maintenance.group_equipment_manager"/>
                    <button name="%(action_allocation_return_transfer_wizard)d" string="Transfer" type="action"
                            class="btn-primary" invisible="state != 'return'"
                            groups="maintenance.group_equipment_manager"/>
                    <button name="button_cancel" string="Cancel" type="object"
                            invisible="state not in ('new', 'waitapprove', 'approve', 'allocate')"/>
                    <button name="button_draf" string="Set To Draft" type="object" invisible="state != 'cancel'"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="action_open_allocatin" type="object" class="oe_stat_button"
                                icon="fa-pencil-square-o" invisible="allocation_count == 0">
                            <field name="allocation_count" widget="statinfo" string="Transfer Allocations"/>
                        </button>
                        <button name="action_picking" type="object" class="oe_stat_button" icon="fa-pencil-square-o"
                                invisible="picking_count == 0">
                            <field name="picking_count" widget="statinfo" string="Pickings"/>
                        </button>
                    </div>
                    <h1>
                        <field name="name"/>
                    </h1>
                    <group>
                        <group>
                            <field name="subject"/>
                            <field name="assing_to"/>
                            <field name="category_id" invisible="state in ('new', 'waitapprove')"
                                   required="state == 'approve'"/>
                            <field name="equipment_id" invisible="state in ('new', 'waitapprove')"
                                   required="state == 'approve'"/>
                            <field name="product_id" invisible="state in ('new', 'waitapprove')"
                                   required="state == 'approve'"/>
                            <field name="serial_id" domain="[('product_id', '=', product_id)]"
                                   invisible="state in ('new', 'waitapprove')"/>
                            <field name="department_id" invisible="state != 'new'"/>
                            <field name="job_positions" invisible="state != 'new'"/>
                            <field name="scheduled_date" invisible="state in ('new', 'waitapprove')"/>
                            <field name="allocation_id" invisible="allocation_id == False"/>
                        </group>
                        <group>
                            <field name="allcation_in" widget="radio" options="{'horizontal': true}"/>
                            <field name="create_date"/>
                            <field name="create_by"/>
                            <field name="approve_by"/>
                            <field name="approve_date"/>
                            <field name="priority"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Description">
                            <field name="note"/>
                        </page>
                        <page string="Other Information">
                            <group>
                                <group>
                                    <field name="warehouse_id"/>
                                    <field name="sources_id"/>
                                    <field name="destination_id"/>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" groups="base.group_user"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>
    <record id="model_asset_allocation_request" model="ir.model">
        <field name="name">Asset Allocation Request</field>
        <field name="model">asset.allocation.request</field>
    </record>

    <record id="allocation_request_tree" model="ir.ui.view">
        <field name="name">allocation.request.tree</field>
        <field name="model">allcation.request</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="allcation_type"/>
                <field name="category_id"/>
                <field name="assing_to"/>
                <field name="approve_by"/>
                <field name="state"/>
            </tree>
        </field>
    </record>

    <record id="action_allocation_request" model="ir.actions.act_window">
        <field name="name">All Allocation</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">allcation.request</field>
        <field name="view_mode">tree,form</field>
    </record>


    <record id="action_allocation_transfer" model="ir.actions.act_window">
        <field name="name">Transfer</field>
        <field name="type">ir.actions.act_window</field>
        <field name="domain">[('transfer', '=', True)]</field>
        <field name="res_model">allcation.request</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="action_allocation_retrun_transfer" model="ir.actions.act_window">
        <field name="name">Return Equipment Request</field>
        <field name="type">ir.actions.act_window</field>
        <field name="domain">[('state', '=', 'return')]</field>
        <field name="res_model">allcation.request</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="action_allocation_equipment" model="ir.actions.act_window">
        <field name="name">Allocation Request</field>
        <field name="type">ir.actions.act_window</field>
        <field name="domain">[('state', 'in', ['new', 'waitapprove'])]</field>
        <field name="res_model">allcation.request</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="eqp_stock_product_normal_action" model="ir.actions.act_window">
        <field name="name">Equipment Products</field>
        <field name="domain">[('equipment', '=', True)]</field>
        <field name="res_model">product.product</field>
        <field name="view_mode">tree,form</field>
        <field name="type">ir.actions.act_window</field>
        <field name="context">{'default_equipment': 1, 'default_tracking': 'serial'}</field>
    </record>

    <menuitem id="menu_m_allocation"
              name="Allocations"
              parent="maintenance.menu_maintenance_title"
              sequence="0"/>

    <menuitem id="menu_allocation_request"
              name="All Allocations"
              parent="menu_m_allocation"
              action="action_allocation_request"
              groups="maintenance.group_equipment_manager"
              sequence="2"/>

<!--    <menuitem id="menu_allocation_transfer"-->
<!--              name="Transfer Allocations"-->
<!--              parent="menu_m_allocation"-->
<!--              action="action_allocation_transfer"-->
<!--              groups="maintenance.group_equipment_manager"-->
<!--              sequence="3"/>-->

<!--    <menuitem id="menu_return_allocation_transfer"-->
<!--              name="Return Allocations"-->
<!--              parent="menu_m_allocation"-->
<!--              action="action_allocation_retrun_transfer"-->
<!--              groups="maintenance.group_equipment_manager"-->
<!--              sequence="4"/>-->

<!--    <menuitem id="menu_allocation_equip"-->
<!--              name="Allocation Requests"-->
<!--              parent="menu_m_allocation"-->
<!--              action="action_allocation_equipment"-->
<!--              sequence="1"/>-->

    <menuitem id="sub_menu_vender_atten"
              name="Employees"
              sequence="5"
              parent="menu_m_allocation"
              action="hr.open_view_employee_list_my"/>

    <menuitem id="sub_menu_product_atten"
              name="Products"
              parent="menu_m_allocation"
              action="eqp_stock_product_normal_action"/>

</odoo>
